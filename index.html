<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<title>TXT → CSV 在线转换</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
/* =========== 仅展示关键差异，其余样式与上版完全一致 =========== */
button{
  width:100%;          /* 新增：按钮填满容器宽度 */
  margin-top:1.5rem;
  padding:.7rem 0;     /* 去掉左右内边距，让文字自然居中 */
  font-size:1.05rem;
  font-weight:600;
  color:#fff;
  background:linear-gradient(135deg,#7c3aed 0%,#4f46e5 100%);
  border:none;
  border-radius:8px;
  cursor:pointer;
  transition:transform .2s ease,box-shadow .2s ease;
  box-shadow:0 0 15px rgba(124,58,237,.5);
}
button:hover{transform:translateY(-2px);box-shadow:0 0 25px rgba(124,58,237,.75)}
button:active{transform:translateY(1px);box-shadow:0 0 10px rgba(124,58,237,.5)}
/* ============================================================ */

/* 以下全部保持与前一份回答相同（省略，可复制前文） */
body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;background:linear-gradient(135deg,#0d0d15 0%,#1a1a2e 50%,#2a1a3e 100%);min-height:100vh;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden}
h2{margin-top:0;font-weight:600;letter-spacing:1px;color:#e0e0ff;text-shadow:0 0 8px rgba(180,140,255,.6)}
.container{width:90%;max-width:900px;background:rgba(30,30,45,.6);border:1px solid rgba(160,120,255,.25);border-radius:12px;padding:2.5rem;position:relative;z-index:10;backdrop-filter:blur(12px);box-shadow:0 0 40px rgba(100,70,200,.35)}
textarea{width:calc(100% - 2rem);height:50vh;font-size:14px;font-family:Consolas,monospace;background:rgba(10,10,25,.7);color:#d0d0ff;border:1px solid rgba(140,100,255,.4);border-radius:8px;padding:1rem;resize:vertical;margin-top:1.5rem;box-shadow:inset 0 0 12px rgba(100,70,200,.3);transition:border-color .3s ease}
textarea:focus{outline:none;border-color:#a87fff;box-shadow:inset 0 0 12px rgba(168,127,255,.5)}
.orb{position:absolute;border-radius:50%;filter:blur(60px);z-index:1;opacity:.7}
.orb1{width:300px;height:300px;background:radial-gradient(circle,#6d28d9 0%,#3b0764 100%);top:10%;left:10%;animation:float1 20s infinite ease-in-out}
.orb2{width:360px;height:360px;background:radial-gradient(circle,#4f46e5 0%,#1e1b4b 100%);bottom:5%;right:5%;animation:float2 24s infinite ease-in-out}
@keyframes float1{0%{transform:translate(0,0) scale(1)}50%{transform:translate(40px,80px) scale(1.15)}100%{transform:translate(0,0) scale(1)}}
@keyframes float2{0%{transform:translate(0,0) scale(1)}50%{transform:translate(-50px,-90px) scale(1.1)}100%{transform:translate(0,0) scale(1)}}
</style>
</head>
<body>
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>

  <div class="container">
    <h2>UE GameplayTag TXT → CSV 转换器</h2>
    <textarea id="input" placeholder="角色
    属性
        基础
            生命值 HP
            ｜ 角色生命值; 恢复方式: 医疗用品/休息;"></textarea>
    <br>
    <button id="btn">转换并下载 CSV</button>
  </div>

  <!-- 功能脚本与之前完全一致，直接复用 -->
  <script>
    function convertTextToCsv(text){const nodes=buildHierarchy(parseInput(text));return nodesToCsv(nodes)}
    function parseInput(txt){const lines=txt.split(/\r?\n/);const nodes=[];let curIndent=-1,curNode=null;for(let raw of lines){raw=raw.replace(/\s+$/,'');if(!raw)continue;let indent=0;while(raw.startsWith('    ')){indent++;raw=raw.slice(4)}let[content,comment='']=raw.includes('｜')?raw.split('｜',2):[raw,''];content=content.trim();comment=comment.trim();if(content){curNode={indent,name:content,comment,full_path:[]};nodes.push(curNode);curIndent=indent}else if(comment&&curNode&&indent===curIndent){curNode.comment+=(curNode.comment?';':'')+comment}}return nodes}
    function buildHierarchy(nodes){const stack=[];for(const node of nodes){while(stack.length&&stack.at(-1).indent>=node.indent)stack.pop();if(stack.length){node.full_path=[...stack.at(-1).full_path,node.name]}else{node.full_path=[node.name]}stack.push(node)}return nodes}
    function nodesToCsv(nodes){const rows=[['Name','Tag','DevComment']];nodes.forEach((n,idx)=>{rows.push([String(idx+1),n.full_path.join('.'),n.comment])});return rows.map(r=>r.map(cell=>`"${String(cell).replace(/"/g,'""')}"`).join(',')).join('\n')}
    document.getElementById('btn').addEventListener('click',()=>{
      const txt=document.getElementById('input').value.trim();
      if(!txt){alert('请先粘贴文本');return}
      const csv=convertTextToCsv(txt);
      const blob=new Blob([csv],{type:'text/csv;charset=utf-8'});
      const a=document.createElement('a');
      a.href=URL.createObjectURL(blob);
      a.download='gameplay_tags.csv';
      a.click()
    });
  </script>
</body>
</html>